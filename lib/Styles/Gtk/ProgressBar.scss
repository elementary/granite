progressbar {
    $trough-width: rem(9px);

    progress {
        @include border-interactive-roundrect;
        background-color: #{'@accent_color'};

        &:backdrop {
            filter: grayscale(100%);
        }
    }

    trough {
        @include trough;
        @include border-interactive-roundrect;

        min-height: $trough-width;
        min-width: $trough-width;
    }

    &.horizontal {
        progress {
            min-height: $trough-width;

            &:not(.pulse) {
                animation: progress 1.5s easing() infinite;
                background-image:
                    linear-gradient(
                        to right,
                        rgba(white, 0),
                        rgba(white, 0.25) 60%,
                        rgba(white, 0)
                    );
                background-repeat: no-repeat;
                background-size: 48px 100%;

                box-shadow: -1px 0px scale-color($highlight_color, $alpha: -93%) inset; 
                border-right: solid 1px $border-color;

                &.right {
                    animation-direction: reverse;

                    border-right: none;
                    border-left: solid 1px $border-color;

                    box-shadow: none;
                    box-shadow: 1px 0px scale-color($highlight_color, $alpha: -93%) inset; 
                }

                &:backdrop {
                    animation: none;
                    background-image: none;
                }
            }
        }
    }

    &.vertical {
        progress {
            min-width: $trough-width;
            border-top: $border-color 1px solid;
            box-shadow: highlight("top");
        }
    }

    @keyframes progress {
        from {
            background-position: calc(0% - 48px), 0%;
        }

        to {
            background-position: calc(100% + 48px), 0%;
        }
    }
}
